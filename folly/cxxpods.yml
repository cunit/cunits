name: folly
repository: 
  url: https://github.com/facebook/folly.git

cmake:
  flags:
    BUILD_SHARED_LIBS: OFF
    CMAKE_BUILD_TYPE: Release
    FOLLY_USE_SYMBOLIZER: OFF
    FOLLY_HAVE_LIBGFLAGS: OFF
    CMAKE_C_FLAGS: \
      -DFOLLY_HAVE_CLOCK_GETTIME=1 \
      -DFOLLY_HAVE_PTHREAD=1 \
      -DFOLLY_NO_CONFIG=1 \
      -DFOLLY_USE_LIBCPP=1 \
      -DFOLLY_HAVE_LIBJEMALLOC=0 \
      -DFOLLY_HAVE_PREADV=0
    #-DFOLLY_MOBILE=1 
    BOOST_INCLUDEDIR: ${CXXPODS_BUILD_INCLUDE}
    DOUBLE_CONVERSION_LIBRARY: ${CXXPODS_BUILD_LIB}/libdouble-conversion.a
    DOUBLE_CONVERSION_INCLUDE_DIR: ${CXXPODS_BUILD_INCLUDE}
    LIBGFLAGS_LIBRARY: ${CXXPODS_BUILD_LIB}/libgflags.a
    LIBGFLAGS_INCLUDE_DIR: ${CXXPODS_BUILD_INCLUDE}
    OPENSSL_SSL_LIBRARY: ${CXXPODS_BUILD_LIB}/libssl.a
    OPENSSL_CRYPTO_LIBRARY: ${CXXPODS_BUILD_LIB}/libcrypto.a
    OPENSSL_INCLUDE_DIR: ${CXXPODS_BUILD_INCLUDE}    
    FOLLY_HAVE_XSI_STRERROR_R_EXITCODE: 1
    FOLLY_HAVE_XSI_STRERROR_R_EXITCODE__TRYRUN_OUTPUT: ""
    HAVE_VSNPRINTF_ERRORS_EXITCODE: 1
    HAVE_VSNPRINTF_ERRORS_EXITCODE__TRYRUN_OUTPUT: ""
    FOLLY_HAVE_LINUX_VDSO_EXITCODE: 1
    FOLLY_HAVE_LINUX_VDSO_EXITCODE__TRYRUN_OUTPUT: ""
    FOLLY_HAVE_WCHAR_SUPPORT_EXITCODE: 1
    FOLLY_HAVE_WCHAR_SUPPORT_EXITCODE__TRYRUN_OUTPUT: ""
    FOLLY_HAVE_UNALIGNED_ACCESS_EXITCODE: 1
    FOLLY_HAVE_UNALIGNED_ACCESS_EXITCODE__TRYRUN_OUTPUT: ""
    EVENT__HAVE_WAITPID_WITH_WNOWAIT_EXITCODE: 0
    EVENT__HAVE_WAITPID_WITH_WNOWAIT_EXITCODE__TRYRUN_OUTPUT: ""
    CMAKE_CXX_FLAGS: -Wno-error=tautological-constant-compare \
      -DFOLLY_HAVE_CLOCK_GETTIME=1 \
      -DFOLLY_HAVE_PTHREAD=1 \
      -DFOLLY_NO_CONFIG=1 \
      -DFOLLY_USE_LIBCPP=1 \
      -DFOLLY_HAVE_LIBJEMALLOC=0 \
      -DFOLLY_HAVE_PREADV=0
  findTemplate: cmake/FindFOLLY.cmake.hbs


dependencies:
  glog: 0.3.5
  gflags: 2.2.2
  double-conversion: 3.0.0
  boost-for-react-native: 1.63.0-0
  event: 2.1.9
  openssl-android: 1.1.0h-r2